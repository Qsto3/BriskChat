$(".ui.sidebar").sidebar("setting",{transition:"overlay"});$(".ts_tip").popup({variation:"inverted"});$(".item > .btn_unstyle.right").popup({variation:"inverted"});$(window).resize(function(){var n=117,t;$(".ui.message").length&&($(".ui.message").hasClass("hidden")||(n+=51));$("#chat_messages").height($(window).height()-n);t=165;$(".sidebar_channels_messages").height($(window).height()-t)});$(window).trigger("resize");var currentRoomId=$(".menu > a.item.active").data("id");console.log("Current room ID: "+currentRoomId);$(function(){$.connection.hub.url="http://localhost:52284/signalr";var n=$.connection.channelHub;$(".menu > a.item").click(function(t){n.server.leaveRoom(currentRoomId);$(".menu > a.item.active").removeClass("active");currentRoomId=$(t.target).data("id");n.server.joinRoom(currentRoomId);$(t.target).addClass("active");console.log("Current room ID: "+currentRoomId)});n.client.broadcastMessage=function(n,t,i){$("#chat_messages").append('<div class="ts-message"><div class="message_gutter"><div class="message_icon"><a href="/team/malgosia" target="/team/malgosia" class="member_image" data-member-id="U42KXAW07" style="background-image: url(\'../images/troll.png\')" aria-hidden="true" tabindex="-1"> <\/a><\/div><\/div><div class="message_content"><div class="message_content_header"><a href="#" class="message_sender">'+n+'<\/a><a href="#" class="timestamp" data-timestamp="'+i+'">'+$.format.date(i,"HH:mm")+'<\/a><\/div><span class="message_body">'+t+"<\/span><\/div><\/div>");$("#chat_messages").clearQueue();$("#chat_messages").animate({scrollTop:$("#chat_messages")[0].scrollHeight},"slow")};$.connection.hub.start().done(function(){n.server.joinRoom(currentRoomId);console.log("Connected :)");$("#msg_form").keypress(function(t){t.which==13&&(t.shiftKey||((message=$("#msg_input").val().trim())&&(console.log("Wysy≈Çam: "+message+" do pokoju "+currentRoomId),n.server.send(currentRoomId,message)),t.preventDefault(),$("#msg_input").val("")))})}).fail(function(n){console.log("Not connected! "+n)});$.connection.hub.received=function(n){console.log(n)};$.connection.hub.error=function(n){console.warn(n)};$.connection.hub.stateChanged(function(n){n.newState===$.signalR.connectionState.reconnecting?(console.log("Re-connecting"),$(".ui.main.container").css("display","none"),$(".ui.dimmer").addClass("active")):n.newState===$.signalR.connectionState.connected&&(console.log("The server is online"),$(".ui.main.container").css("display","block"),$(".ui.dimmer").removeClass("active"))});$.connection.hub.reconnected(function(){console.log("Reconnected")})});