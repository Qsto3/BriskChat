function serializeForm(n){data=$(n).serializeArray();var t={};return $.each(data,function(n,i){t[i.name]=i.value}),t}var currentRoomId,myHub;$(".ui.sidebar").sidebar("setting",{transition:"overlay"});$(".ts_tip").popup({variation:"inverted"});$(".item > .btn_unstyle.right").popup({variation:"inverted"});$(window).resize(function(){var n=117,t;$(".ui.message").length&&($(".ui.message").hasClass("hidden")||(n+=51));$("#chat_messages").height($(window).height()-n);t=165;$(".sidebar_channels_messages").height($(window).height()-t)});$(window).trigger("resize");currentRoomId=$(".menu > a.item.active").data("id");$.connection.hub.url="http://localhost:52284/signalr";myHub=$.connection.channelHub;$(".menu > a.item").click(function(n){myHub.server.leaveRoom(currentRoomId);$(".menu > a.item.active").removeClass("active");currentRoomId=$(n.target).data("id");myHub.server.joinRoom(currentRoomId);$(n.target).addClass("active");console.log("Current room ID: "+currentRoomId)});myHub.client.broadcastMessage=function(n,t,i){$("#chat_messages").append('<div class="ts-message"><div class="message_gutter"><div class="message_icon"><a href="/team/malgosia" target="/team/malgosia" class="member_image" data-member-id="U42KXAW07" style="background-image: url(\'../images/troll.png\')" aria-hidden="true" tabindex="-1"> <\/a><\/div><\/div><div class="message_content"><div class="message_content_header"><a href="#" class="message_sender">'+n+'<\/a><a href="#" class="timestamp">'+i+'<\/a><\/div><span class="message_body">'+t+"<\/span><\/div><\/div>");$("#chat_messages").clearQueue();$("#chat_messages").animate({scrollTop:$("#chat_messages")[0].scrollHeight},"slow")};myHub.client.channelAddedAction=function(n,t,i){var r='<a class="item" data-id="'+t+'">';r+=i?'<i class="icon left">#<\/i>':'<i class="lock icon left"><\/i>';r+=n+"<\/a>";$("#channelsMenu").append(r)};$.connection.hub.start().done(function(){myHub.server.joinRoom(currentRoomId);console.log("Connected :)");$("#msg_form").keypress(function(n){n.which==13&&(n.shiftKey||((message=$("#msg_input").val().trim())&&(console.log("Wysy≈Çam: "+message+" do pokoju "+currentRoomId),myHub.server.send(currentRoomId,message)),n.preventDefault(),$("#msg_input").val("")))})}).fail(function(n){console.log("Not connected! "+n)});$.connection.hub.error=function(n){console.warn(n)};$.connection.hub.stateChanged(function(n){n.newState===$.signalR.connectionState.reconnecting?(console.log("Re-connecting"),$(".ui.main.container").css("display","none"),$(".ui.dimmer").addClass("active")):n.newState===$.signalR.connectionState.connected&&(console.log("The server is online"),$(".ui.main.container").css("display","block"),$(".ui.dimmer").removeClass("active"))});$.connection.hub.reconnected(function(){console.log("Reconnected")});$("#createNewChannel").click(function(){$("#createChanelForm")[0].reset();$(".ui.modal").modal("setting","closable",!1).modal("show")});$("#myCheckBox").click(function(){$(this).is(":checked")?($("#createNewChannelHeader").html("Create a channel"),$("#createNewChannelLabel").html("Anyone on your team can view and join this channel"),document.getElementsByName("IsPublic")[1].value=!0):($("#createNewChannelHeader").html("Create a private channel"),$("#createNewChannelLabel").html("This channel can only be joined by invite"),document.getElementsByName("IsPublic")[1].value=!1)});$("#createChanelForm").submit(function(n){n.preventDefault();data=serializeForm($(this));myHub.server.createNewChannel(data);$(".ui.modal").modal("hide")});