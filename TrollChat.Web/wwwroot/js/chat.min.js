function loadingStart(){loading=!0;$(".ui.main.container").css("display","none");$(".ui.dimmer").addClass("active")}function loadingStop(){loading=!1;$(".ui.sidebar.right").hasClass("visible")?$(".ui.main.container").css("cssText","margin-left: 260px !important"):$(".ui.main.container").removeAttr("style");$(".ui.dimmer").removeClass("active");addActionsToMessages();console.log("Loader stops")}function addActionsToMessages(){$(".ts-message").not(":has(> .action_hover_container), #message_edit_container").each(function(){if($(this).find(".message_sender").text()!==globalUserName||$(this).find(".member_image").data("member-id")!==globalUserId)return!0;$(this).prepend('<div class="action_hover_container stretch_btn_heights narrow_buttons" data-js="action_hover_container" data-show_rxn_action="true">            <button type="button" data-action="edit" class="btn_unstyle btn_msg_action ts_tip" data-content="Edit message" data-position="bottom center">            <i class="edit icon"><\/i>            <\/button>            <button type="button" data-action="delete" class="btn_unstyle btn_msg_action ts_tip danger" data-content="Delete message" data-position="bottom right">            <i class="delete icon"><\/i>            <\/button>            <\/div>')})}function changeRoom(n){var t;(t=n.data("id"))&&currentRoomId!==t&&(loadingStart(),$("#chat_messages").empty(),myHub.server.leaveRoom(currentRoomId),$(".menu > a.item.active").removeClass("active"),joinRoom=myHub.server.joinRoom(t),$.when(joinRoom).then(function(){currentRoomId=t;n.addClass("active");$("#channel_title").html(n.html());getRoomInformation=myHub.server.getRoomInformation(currentRoomId);$.when(getRoomInformation).then(function(){loadingStop();loadedMessagesIteration=1})}))}function addEditContainer(n,t,i){return'<div class="ts-message message highlight" id="message_edit_container">            <div class="message_gutter">                <div class="message_icon">                    '+i+'                <\/div>            <\/div>            <form id="message_edit_form" data-id="'+n+'">                <button class="btn_unstyle emo_menu" aria-label="Emoji menu" type="button">                    <i class="meh icon"><\/i>                <\/button>                <div id="msg_text" class="message_input ql-container focus">                    <div class="ql-editor" role="textbox" tabindex="0" aria-multiline="true" aria-haspopup="true" spellcheck="true" contenteditable="true"><p>'+t+'<\/p><\/div>                    <div class="ql-clipboard" tabindex="-1" aria-hidden="true" role="presentation" spellcheck="true" contenteditable="true"><\/div>                <\/div>                <a id="cancel_edit" role="button" class="ui button mini">Cancel<\/a>                <a id="commit_edit" role="button" class="ui button mini positive"><i class="icon edit"><\/i>Save Changes<\/a>                <span id="message_editing_info" class="mini" style="display: none;">Finish editing this message first! Or press <strong>escape<\/strong> if youve changed your mind.<\/span>            <\/form>        <\/div>'}function emoReplacer(){for(var t=Array.slice(arguments),n=1;n<t.length-2;n++)if(t[n])return'<span class="emoji-outer emoji-sizer" style="background: url(/images/emoticons/'+emoticonsGroup[n]+'.png)" title="'+emoticonsGroup[n]+'">:'+emoticonsGroup[n]+":<\/span>"}function parseEmoticons(n){var t=new RegExp(emoticonRegex,"gi");return n.replace(t,emoReplacer)}function getMessageHtml(n,t,i,r,u,f){return'<div class="ts-message" data-id="'+i+'"><div class="message_gutter"><div class="message_icon"><a href="/team/malgosia" target="/team/malgosia" class="member_image" data-member-id="'+t+'" style="background-image: url('+GravatarUrl+f+"?s=36&"+GravatarOptions+')" aria-hidden="true" tabindex="-1"> <\/a><\/div><\/div><div class="message_content"><div class="message_content_header"><a href="#" class="message_sender">'+n+'<\/a><a href="#" class="timestamp">'+u+'<\/a><\/div><span class="message_body">'+Autolinker.link(parseEmoticons(r))}function updateChannelsCount(n){var t=$("#channelsCount").text().match(/\d+/);t=parseInt(t)+n;$("#channelsCount").text("CHANNELS ("+t+")")}function serializeForm(n){data=$(n).serializeArray();var t={};return $.each(data,function(n,i){t[i.name]=i.value}),t}function channelSettings(){var n,t;$("#Rightbar").html("");$("#rightbar_Title").html("Channel Settings");n='<div class="item">                            <div class="ui styled accordion">                                    <div class="accordion">                                        <div class="title"><i class="theme icon"><\/i>Customization<\/div>                                        <div class="content" id="customization">                                            <div class="ui form">                                                <div class="field">                                                    <select id="selecttheme" class="ui dropdown" onchange="selectTheme(this);">                                                        <option value="0">Black<\/option>                                                        <option value="1">Blue<\/option>                                                        <option value="2">Green<\/option>                                                        <option value="3">Orange<\/option>                                                        <option value="4">Pink<\/option>                                                    <\/select>                                                <\/div>                                            <\/div>                                        <\/div>                                        <div class="title"><i class="wpforms icon"><\/i>Topic<\/div>                                        <div class="content" id="Topic">                                            <div class="ui form">                                                <div class="field">                                                <input type="text" id="infoTopic">                                                <\/div>                                            <\/div>                                        <\/div>                                        <div class="title"><i class="wpforms icon"><\/i>Description<\/div>                                        <div class="content" id="Description">                                            <div class="ui form">                                                <div class="field">                                                <input type="text" id="infoDescription">                                                <\/div>                                            <\/div>                                        <\/div>                                        <div class="title"><i class="wpforms icon"><\/i>Room Name<\/div>                                        <div class="content" id="roomName">                                            <div class="ui form">                                                <div class="field">                                                <input type="text" id="infoName">                                                <\/div>                                            <\/div>                                        <\/div>                                        <div class="title"><i class="delete icon"><\/i>Delete Room<\/div>                                        <div class="content" id="deleteRoom">                                            <div class="ui two column centered grid">                                                    <div class="ui form ">                                                        <div class="field">                                                            <button class="negative ui button" id="deleteRoomButton" data-inverted="" data-tooltip="Irrevocable removal of the room" data-position="bottom center" onclick="deleteRoom();">Delete Room<\/button>                                                        <\/div>                                                    <\/div>                                                <\/div>                                         <\/div>                                    <\/div>                            <\/div>                        <\/div>';$("#deleteRoomButton").popup({variation:"inverted"});t='<div class="bottom attached centered ui item" id="right_bar_save_cancel_buttons">                            <div class="ui buttons" tabindex="0"><button class="ui button" onclick="closeRightBarCallback();">Cancel<\/button>                                <div class="or"><\/div>                                <button class="ui positive button" onclick="changeSettingsValue(currentTheme);">Save<\/button>                            <\/div>                        <\/div>';$("#Rightbar").append(n);getRoomInformation=myHub.server.getRoomInformation(currentRoomId);$.when(getRoomInformation).then(function(){$("#rightsidebarblock").append(t);$(".ui.styled.accordion").accordion()})}function channelDetails(){$("#Rightbar").html("");$("#right_bar_save_cancel_buttons").length&&$("#right_bar_save_cancel_buttons").remove();$("#rightbar_Title").html("Channel Details");$("#Rightbar").append('<div class="ui styled accordion"><div class="active content"><div class="accordion"><div class="title"><i class="dropdown icon"><\/i><i class="info icon"><\/i>About<\/div><div class="content" id="aboutInfo"><\/div><div class="title"><i class="dropdown icon"><\/i><i class="users icon"><\/i>Members<\/div><div class="content" id="MembersInRoom"><\/div><\/div><\/div><\/div>');$(".ui.styled.accordion").accordion();myHub.server.getRoomUsers(currentRoomId);myHub.server.getRoomInformation(currentRoomId)}function changeSettingsValue(n){var u=parseInt(currentTheme),t=$("#infoTopic").val(),i=$("#infoName").val(),r=$("#infoDescription").val();roomNameInDatabase!==i&&myHub.server.editRoomName(currentRoomId,i);topicInDatabase!==t&&myHub.server.editRoomTopic(currentRoomId,t);descriptionInDatabase!==r&&myHub.server.editRoomDescription(currentRoomId,r);themeInDatabase!==n&&myHub.server.editRoomCustomization(currentRoomId,u);$(".ui.sidebar.right").removeClass("visible");$(".ui.main.container").removeAttr("style")}function changeTheme(n){switch(n){case"0":leftbar="#1B1C1D";break;case"1":leftbar="#0080ff";break;case"2":leftbar="#33CC00";break;case"3":leftbar="#FF9900";break;case"4":leftbar="#D15CC1";break;default:leftbar="#1B1C1D"}$(".ui.sidebar.left").css("background-color",leftbar)}function selectTheme(n){currentTheme=n.value;changeTheme(currentTheme)}var myHub,additionalEmoticonNames,emoticonRegex,emoticonsGroup,i,j,loadingMessageOffset,closeRightBarCallback;$(".ui.sidebar.left").sidebar("setting",{transition:"overlay"});$(".ui.sidebar.right").first().sidebar();$(document).on("reloadPopups",function(){$(".ts_tip").popup({variation:"inverted"});$(".item > .btn_unstyle.right").popup({variation:"inverted"})});var Autolinker=new Autolinker({stripPrefix:!1,stripTrailingSlash:!1}),globalDomainName,globalUserName,globalUserId,loading=!0,currentTheme,topicInDatabase,roomNameInDatabase,descriptionInDatabase,currentRoomId=0,loadedMessagesIteration=1,GravatarUrl="https://www.gravatar.com/avatar/",GravatarOptions="d=retro";$(window).resize(function(){var n=117,t;$(".ui.message").length&&($(".ui.message").hasClass("hidden")||(n+=51));$("#chat_messages").height($(window).height()-n);t=165;$(".sidebar_channels_messages").height($(window).height()-t)});$(window).trigger("resize");$.connection.hub.url="http://localhost:52284/signalr";myHub=$.connection.channelHub;$("#channelsCount").click(function(){(console.log("Click na licznik kanałów"),loading)||myHub.server.getDomainPublicRooms()});$(".menu").on("click",".menu > a.item",function(n){loading||changeRoom($(n.currentTarget))});$("#chat_messages").on("click",".ts-message .btn_msg_action[data-action='edit']",function(n){function i(n){console.log("Click listener");$(document).find("#message_edit_container").length&&($(n.target).parents().addBack().is("#message_edit_container")||(console.log("Kliknięto poza. Usuwam #MEC"),document.removeEventListener("click",i,!0),$(document).find("#message_edit_container").prev().show(),$(document).find("#message_edit_container").remove()))}var r,e;$(document).find("#message_edit_container").length&&($(document).find("#message_edit_container").prev().show(),$(document).find("#message_edit_container").remove());var t=$(n.target).closest(".ts-message"),u=t.data("id"),f=t.find(".message_body").text();t.hide();t.after(addEditContainer(u,f,t.find(".message_icon").html()));$(".ql-editor").focus();r=document.createRange();r.selectNodeContents($(".ql-editor").get(0));r.collapse(!1);e=window.getSelection();e.removeAllRanges();e.addRange(r);$(document).find("#message_edit_container").length&&document.addEventListener("click",i,!0);$(".ts-message").on("click","#cancel_edit",function(n){document.removeEventListener("click",i,!0);t.show();$(n.target).closest("#message_edit_container").remove()});$("#message_edit_container").keydown(function(n){console.log("keydown dla #message_edit_container");n.keyCode===27&&(console.log("Escape key dla #message_edit_container"),document.removeEventListener("click",i,!0),$(document).find("#message_edit_container").prev().show(),$(document).find("#message_edit_container").remove())});$("#message_edit_form").keypress(function(n){if(console.log("keypress dla #message_edit_form"),n.which===13&&!n.shiftKey){if(console.log("Enter key dla #message_edit_form"),f!==$(".ql-editor").text().trim()){console.log("Wiadomosci sie roznia");var r;r===$(".ql-editor").text().trim()&&(console.log("Edytuję: "+r+" do pokoju "+currentRoomId),myHub.server.editMessage(currentRoomId,u,r))}document.removeEventListener("click",i,!0);t.show();$(n.target).closest("#message_edit_container").remove()}});$(".ts-message").on("click","#commit_edit",function(n){if(f!==$(".ql-editor").text().trim()){var r=$(".ql-editor").text().trim();r&&(console.log("Edytuję: "+r+" do pokoju "+currentRoomId),myHub.server.editMessage(currentRoomId,u,r))}document.removeEventListener("click",i,!0);t.show();$(n.target).closest("#message_edit_container").remove()})});$(".grid").on("click",".private-conversation-row",function(n){var t=n.currentTarget,r=$(t).data("name"),u=$(t).data("id"),i=$("#inputtext");$(t).hide();$(i).attr("placeholder","");$("#createPrivateConversationForm").find(":submit").removeClass("disabled").addClass("positive");$(i).before('<span class="private-conversation-tag" data-id="'+u+'">'+r+' <i class="remove icon"><\/i><\/span>')});$("#chat_messages").on("click",".ts-message .btn_msg_action[data-action='delete']",function(n){$(".ui.delete.modal").modal({onApprove:function(){var t=$(n.target).closest(".ts-message").data("id");myHub.server.deleteMessage(currentRoomId,t)}}).modal("show")});for(myHub.client.broadcastEditedMessage=function(n,t){var f=$(".ts-message[data-id='"+n+"']"),i=f.find(".message_body"),r,u;i.first().html(Autolinker.link(parseEmoticons(t)));r=t.match(/watch\?v=([a-zA-Z0-9\-_]+)/);r?(u='<iframe src="https://www.youtube.com/embed/'+r[1]+'?feature=oembed&amp;autoplay=0&amp;iv_load_policy=3" allowfullscreen="" height="300" frameborder="0" width="400"><\/iframe>',i.last().hasClass("youtube_iframe")?i.last().html(u):i.last().after(u)):i.last().hasClass("youtube_iframe")&&i.last().hide("slow",function(){i.last().remove()})},additionalEmoticonNames=["poop","party"],emoticonRegex="(:smile:|\\B:-?[)]\\B)|(:smile_big:|\\B:-?[D]\\b)|(:sad:|\\B:-?[(]\\B)|(:tongue:|\\B:-?[P]\\b)|(:crying:|\\B;-?[(]\\B)|(:wink:|\\B;-?[)]\\B)",i=0;i<additionalEmoticonNames.length;i++)emoticonRegex+="|(:"+additionalEmoticonNames[i]+":)";for(emoticonsGroup={1:"smile",2:"smile_big",3:"sad",4:"tongue",5:"crying",6:"wink"},i=Object.keys(emoticonsGroup).length+1,j=0;j<additionalEmoticonNames.length;i++,j++)emoticonsGroup[i]=additionalEmoticonNames[j];loadingMessageOffset=!1;$("#chat_messages").scroll(function(){var n,t;$(".ui.dimmer").hasClass("active")||loadingMessageOffset||(n=$("#chat_messages").scrollTop(),n<100&&(loadingMessageOffset=!0,t=$("#chat_messages").children().first(),$(".ui.dimmer").addClass("active"),getPreviousMessages=myHub.server.getPreviousMessages(currentRoomId,loadedMessagesIteration),$.when(getPreviousMessages).then(function(){var i=t.prevAll(),n;i.length>0&&(n=0,i.each(function(){n+=$(this).outerHeight()}),$("#chat_messages").scrollTop(n));$(".ui.dimmer").removeClass("active");loadingMessageOffset=!1;loadedMessagesIteration++})))});myHub.client.broadcastMessage=function(n,t,i,r,u,f){var e=getMessageHtml(n,t,i,r,u,f),o=r.match(/watch\?v=([a-zA-Z0-9\-_]+)/);e+=o?'<\/span><span class="message_body youtube_iframe"><iframe src="https://www.youtube.com/embed/'+o[1]+'?feature=oembed&amp;autoplay=0&amp;iv_load_policy=3" allowfullscreen="" height="300" frameborder="0" width="400"><\/iframe><\/span><\/div><\/div>':"<\/span><\/div><\/div>";$("#chat_messages").append(e);$("#chat_messages").clearQueue();$("#chat_messages").animate({scrollTop:$("#chat_messages")[0].scrollHeight},"slow");addActionsToMessages();$(document).trigger("reloadPopups")};myHub.client.deleteMessage=function(n){var t=$(".ts-message[data-id='"+n+"']");console.log("Klient usuwa wiadomosc o ID: "+t.data("id"));t.hide("slow",function(){t.remove()})};myHub.client.loadRooms=function(n){var t=!0;$("#channelsCount").text("CHANNELS ("+n.length+")");$.each(n,function(n,i){var r='<a class="item';t&&(r+=" active",t=!1,currentRoomId=i.Id);r+='"data-id="'+i.Id+'" data-ispublic="'+i.IsPublic+'">';r+=i.IsPublic?'<i class="icon left">#<\/i>':'<i class="lock icon left"><\/i>';r+=i.Name+"<\/a>";$("#channelsMenu").append(r)})};myHub.client.loadDomainPublicRooms=function(n){var i=!0,t;$.each(n,function(n,t){var r='<a class="item';i&&(r+=" active",i=!1,currentRoomId=t.Id);r+='"data-id="'+t.Id+'" data-ispublic="'+t.IsPublic+'">';r+=t.IsPublic?'<i class="icon left">#<\/i>':'<i class="lock icon left"><\/i>';r+=t.Name+"<\/a>";$("#channelsMenu").append(r)});t={};$("#channelsMenu > .item").filter(function(){var n=$(this).data("id");return t[n]?($(this).remove(),!1):(t[n]=!0,!0)});$("#channelsCount").text("CHANNELS ("+$("#channelsMenu > .item").length+")")};myHub.client.loadPrivateConversations=function(n){$.each(n,function(n,t){var i='<a class="item" data-id="'+t.Id+'"><i class="icon left">#<\/i>'+t.Name+"<\/a>";$("#privateConversationsMenu").append(i)})};myHub.client.parseLastMessages=function(n){$.each(n,function(n,t){var i=getMessageHtml(t.UserName,t.UserId,t.Id,t.Text,t.CreatedOn,t.EmailHash),r=t.Text.match(/watch\?v=([a-zA-Z0-9\-_]+)/);i+=r?'<\/span><span class="message_body youtube_iframe"><iframe src="https://www.youtube.com/embed/'+r[1]+'?feature=oembed&amp;autoplay=0&amp;iv_load_policy=3" allowfullscreen="" height="300" frameborder="0" width="400"><\/iframe><\/span><\/div><\/div>':"<\/span><\/div><\/div>";$("#chat_messages").append(i)});$(".ui.main.container").css("display","block");$("#chat_messages").clearQueue();$("#chat_messages").animate({scrollTop:$("#chat_messages")[0].scrollHeight},"slow");addActionsToMessages();$(document).trigger("reloadPopups")};myHub.client.parseOffsetMessages=function(n){$.each(n,function(n,t){var i=getMessageHtml(t.UserName,t.UserId,t.Id,t.Text,t.CreatedOn,t.EmailHash),r=t.Text.match(/watch\?v=([a-zA-Z0-9\-_]+)/);i+=r?'<\/span><span class="message_body youtube_iframe"><iframe src="https://www.youtube.com/embed/'+r[1]+'?feature=oembed&amp;autoplay=0&amp;iv_load_policy=3" allowfullscreen="" height="300" frameborder="0" width="400"><\/iframe><\/span><\/div><\/div>':"<\/span><\/div><\/div>";$("#chat_messages").prepend(i)});addActionsToMessages();$(document).trigger("reloadPopups")};myHub.client.channelAddedAction=function(n,t,i){var r='<a class="item" data-id="'+t+'" data-ispublic="'+i+'">';r+=i?'<i class="icon left">#<\/i>':'<i class="lock icon left"><\/i>';r+=n+"<\/a>";$("#channelsMenu").append(r);updateChannelsCount(1);changeRoom($("#channelsMenu").children().last())};myHub.client.privateConversationAddedAction=function(n){var t='<a class="item" data-id="'+n.Id+'"><i class="icon left">#<\/i>'+n.Name+"<\/a>";$("#privateConversationsMenu").append(t);changeRoom($("#privateConversationsMenu").children().last())};myHub.client.privateConversationsUsersLoadedAction=function(n){$("#privateConversationsUserList").empty();$.each(n,function(n,t){var i='<div class="row private-conversation-row" data-id="'+t.Id+'" data-name="'+t.Name+'">';i+='<div class="eight wide column"><b>'+t.Email+"<\/b> ";i+=t.IsOnline?'<i class="circle icon green"><\/i>':'<i class="circle thin icon"><\/i>';i+=t.Name+"<\/div>";i+='<div class="four wide column"><\/div>';i+='<div class="four wide column mycheckmark"><i class="checkmark icon"><\/i><\/div>';i+="<\/div>";$("#privateConversationsUserList").append(i)})};myHub.client.setDomainInformation=function(n,t,i){globalDomainName=n;globalUserName=t;globalUserId=i;$("#team_name").text(globalDomainName);$("#team_menu_user_name").text(globalUserName);document.title=globalDomainName+" "+document.title};myHub.client.updateRoomUsersCount=function(n){$("#channel_members_toggle_count_count").text(n)};$.connection.hub.start().done(function(){console.log("Connected to Hub. Getting rooms");getRooms=myHub.server.getRooms();getPrivateConversations=myHub.server.getPrivateConversations();$.when(getRooms).then(function(){$.when(myHub.server.joinRoom(currentRoomId)).then(function(){console.log("Connected to room");var n=$(".menu > a.item.active");$("#channel_title").html($(n).html());getRoomInformation=myHub.server.getRoomInformation(currentRoomId);$.when(getRoomInformation).then(function(){loadingStop();$("#msg_form").keypress(function(n){if(n.which===13&&!n.shiftKey){var t=$("#msg_input").val().trim();t&&(console.log("Wysyłam: "+t+" do pokoju "+currentRoomId),myHub.server.sendMessage(currentRoomId,t));n.preventDefault();$("#msg_input").val("")}})})})})}).fail(function(n){console.log("Not connected! "+n)});$.connection.hub.error=function(n){console.warn(n)};$.connection.hub.stateChanged(function(n){n.newState===$.signalR.connectionState.reconnecting&&(console.log("Re-connecting"),loadingStart())});$.connection.hub.reconnected(function(){console.log("Reconnected");loadingStop()});window.onbeforeunload=function(){$.connection.hub.stop()};$("#createNewChannel").click(function(){var n,t;loading||($("#createChanelForm")[0].reset(),n=$("input[name*='IsPublic']")[1],n.value=!1,t=$(".ui.basic.create-room.modal"),$(t).modal({closable:!1,onShow:function(){$(".ui.dimmer.modals").css("background-color","#fff")},onHide:function(){$(".ui.dimmer.modals").css("background-color","")}}).modal("show"))});$("#createNewPrivateConversation").click(function(){if(!loading){$("#createPrivateConversationForm")[0].reset();$("#createPrivateConversationForm").find(".private-conversation-tag").remove();myHub.server.getUsersFromDomain();var n=$(".ui.basic.create-private-conversation.modal");$(n).modal({closable:!1,onShow:function(){$(".ui.dimmer.modals").css("background-color","#fff")},onHide:function(){$(".ui.dimmer.modals").css("background-color","")}}).modal("show")}});$("#myCheckBox").click(function(){$(this).is(":checked")?($("#createNewChannelHeader").html("Create a channel"),$("#createNewChannelLabel").html("Anyone on your team can view and join this channel"),$("input[name*='IsPublic']")[1].value=!0):($("#createNewChannelHeader").html("Create a private channel"),$("#createNewChannelLabel").html("This channel can only be joined by invite"),$("input[name*='IsPublic']")[1].value=!1)});$("#createChanelForm").submit(function(n){loadingStart();n.preventDefault();data=serializeForm($(this));myHub.server.createNewChannel(data);$(".ui.basic.create-room.modal").modal("hide")});$("#createPrivateConversationForm").submit(function(n){var t,i,r;n.preventDefault();t=[];i=[];$("#createPrivateConversationForm").find(".private-conversation-tag").each(function(n,r){t.push($(r).data("id"));i.push($.trim($(r).text()));console.log($.trim($(r).text()))});console.log(i[0]);t.length>0&&(r=$("#privateConversationsMenu a:contains('"+i[0]+"')"),console.log(r),r.length?changeRoom(r):(loadingStart(),myHub.server.createNewPrivateConversation(t)),$(".ui.basic.create-private-conversation.modal").modal("hide"))});myHub.client.broadcastEditedRoomTopic=function(n){topicInDatabase=n;$("#channel_topic_text").html(n);$(".ui.sidebar.right").hasClass("visible")&&$("#rightbar_Title").text()==="Channel Settings"&&$("#infoTopic").val(topicInDatabase)};myHub.client.broadcastEditedRoomDescription=function(n){descriptionInDatabase=n;$(".ui.sidebar.right").hasClass("visible")&&($("#rightbar_Title").text()==="Channel Settings"?$("#infoDescription").val(descriptionInDatabase):$("#channelDetailsDescription").text(descriptionInDatabase))};myHub.client.broadcastEditedRoomCustomization=function(n){themeInDatabase=n.toString();changeTheme(themeInDatabase);$(".ui.sidebar.right").hasClass("visible")&&$("#rightbar_Title").text()==="Channel Settings"&&$("#selecttheme").val(n)};myHub.client.broadcastEditedActiveRoomName=function(n){roomNameInDatabase=n;$("#channel_title").contents().last().replaceWith(roomNameInDatabase);$("#channelsMenu > a.item.active").contents().last().replaceWith(roomNameInDatabase);$("#msg_input").attr("placeholder","Message "+roomNameInDatabase);$(".ui.sidebar.right").hasClass("visible")&&$("#rightbar_Title").text()==="Channel Settings"&&$("#infoName").val(roomNameInDatabase)};myHub.client.broadcastDomainEditedRoomName=function(n,t){$("#channelsMenu > a.item.active").data("id")!==n&&$("[data-id='"+n+"']").contents().last().replaceWith(t)};$("#channel_settings_toggle").click(function(){var n=$(".ui.sidebar.right");n.hasClass("visible")?$("#rightbar_Title").text()==="Channel Settings"?(n.removeClass("visible"),$(".ui.main.container").removeAttr("style")):channelSettings():(channelSettings(),n.addClass("visible"),$(".ui.main.container").css("cssText","margin-left: 260px !important"))});closeRightBarCallback=function(){$(".ui.sidebar.right").removeClass("visible");$(".ui.main.container").removeAttr("style");changeTheme(themeInDatabase)};$("#closerightbar").click(function(){closeRightBarCallback()});$(document).keydown(function(n){n.keyCode===27&&$(".ui.sidebar.right").hasClass("visible")&&(console.log("Escape dla prawego sidebaru"),closeRightBarCallback())});$("#channel_details_toggle").click(function(){var n=$(".ui.sidebar.right");n.hasClass("visible")?$("#rightbar_Title").html()==="Channel Details"?(n.removeClass("visible"),$(".ui.main.container").removeAttr("style")):channelDetails():(channelDetails(),n.addClass("visible"),$(".ui.main.container").css("cssText","margin-left: 260px !important"))});$(document).on("click",".private-conversation-tag",function(n){var t=$(n.currentTarget).data("id");$('.row.private-conversation-row[data-id="'+t+'"]').show();$(n.currentTarget).remove();$("#createPrivateConversationForm").find(".private-conversation-tag").length||($("#createPrivateConversationForm").find(":submit").addClass("disabled").removeClass("positive"),$("#inputtext").attr("placeholder","Find or start a conversation"))});myHub.client.usersInRoom=function(n){$("#MembersInRoom").empty();$("#MembersInRoom").prev().contents().last().replaceWith(n.length+" Members");$.each(n,function(n,t){var i='<div class="row MembersInRoom-row" data-id="'+t.Id+'" data-name="'+t.Name+'">';i+='<div class="eight wide column"><img class="gravatarMembersList" src="'+GravatarUrl+t.EmailHash+"?s=20&"+GravatarOptions+'">'+t.Name;globalUserName==t.Name&&(i+="(you)");i+=t.IsOnline?'<i class="small circle icon green"><\/i>':'<i class="small circle thin icon"><\/i>';i+="<\/div><\/div>";$("#MembersInRoom").append(i)})};myHub.client.roomInfo=function(n,t){if(themeInDatabase=String(n.Customization),currentTheme=themeInDatabase,topicInDatabase=n.Topic,roomNameInDatabase=n.Name,descriptionInDatabase=n.Description,changeTheme(themeInDatabase),$(".ui.sidebar.right").hasClass("visible"))if($("#rightbar_Title").html()==="Channel Details"){var i="<div>Created by <b>"+n.OwnerName+"<\/b> on "+t+'<h5>Description<\/h5><span id="channelDetailsDescription">'+n.Description+"<\/span><\/div>";$("#aboutInfo").empty();$("#aboutInfo").append(i)}else $("#selecttheme").val(themeInDatabase),$("#infoTopic").val(n.Topic),$("#infoName").val(roomNameInDatabase),$("#infoDescription").val(n.Description);$("#channel_topic_text").html(topicInDatabase);$("#msg_input").attr("placeholder","Message "+roomNameInDatabase)};